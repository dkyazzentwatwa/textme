{
  "name": "imessage",
  "version": "1.1.0",
  "description": "Send and receive iMessages via Claude Code using Sendblue. Use /textme to enable text mode.",
  "author": {
    "name": "njerschow"
  },
  "license": "MIT",
  "keywords": ["imessage", "sms", "sendblue", "messaging", "textme", "afk"],
  "commands": "./commands",
  "skills": "./skills",
  "mcpServers": {
    "imessage": {
      "command": "npx",
      "args": ["--yes", "tsx", "${CLAUDE_PLUGIN_ROOT}/server/src/index.ts"],
      "env": {
        "SENDBLUE_API_KEY": "${SENDBLUE_API_KEY}",
        "SENDBLUE_API_SECRET": "${SENDBLUE_API_SECRET}",
        "SENDBLUE_PHONE_NUMBER": "${SENDBLUE_PHONE_NUMBER}",
        "IMESSAGE_WHITELIST": "${IMESSAGE_WHITELIST}",
        "IMESSAGE_POLL_INTERVAL_MS": "${IMESSAGE_POLL_INTERVAL_MS:-5000}"
      }
    }
  },
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if text mode is enabled by running: test -f ~/.config/claude-imessage/textme-enabled && echo TEXTME_ON || echo TEXTME_OFF\n\nIf TEXTME_ON: You MUST use notify_user to send a brief summary of what you just did. If you need user input, use ask_user instead and WAIT for their text response.\n\nIf TEXTME_OFF: SILENTLY evaluate if you should message the user. ONLY use ask_user if you completed significant work and need to discuss next steps, or are genuinely blocked. Do NOT output any text - either use ask_user or do nothing."
          }
        ]
      }
    ]
  }
}
